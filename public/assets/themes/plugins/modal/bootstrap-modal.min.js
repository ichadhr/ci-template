!function(s){"use strict";function o(t,e){this.init(t,e)}o.prototype={constructor:o,init:function(t,e){var n,i;this.$element=s(t),this.options=s.extend({},s.fn.modalmanager.defaults,this.$element.data(),"object"==typeof e&&e),this.stack=[],this.backdropCount=0,this.options.resize&&(i=this,s(window).on("resize.modal",function(){n&&clearTimeout(n),n=setTimeout(function(){for(var t=0;t<i.stack.length;t++)i.stack[t].isShown&&i.stack[t].layout()},10)}))},createModal:function(t,e){s(t).modal(s.extend({manager:this},e))},appendModal:function(n){this.stack.push(n);var i=this;n.$element.on("show.modalmanager",l(function(t){function e(){n.isShown=!0;var e=s.support.transition&&n.$element.hasClass("fade");i.$element.toggleClass("modal-open",i.hasOpenModal()).toggleClass("page-overflow",s(window).height()<i.$element.height()),n.$parent=n.$element.parent(),n.$container=i.createContainer(n),n.$element.appendTo(n.$container),i.backdrop(n,function(){n.$element.show(),e&&n.$element[0].offsetWidth,n.layout(),n.$element.addClass("in").attr("aria-hidden",!1);function t(){i.setFocus(),n.$element.trigger("shown")}e?n.$element.one(s.support.transition.end,t):t()})}n.options.replace?i.replace(e):e()})),n.$element.on("hidden.modalmanager",l(function(t){i.backdrop(n),n.$element.parent().length?n.$backdrop?(s.support.transition&&n.$element.hasClass("fade")&&n.$element[0].offsetWidth,s.support.transition&&n.$element.hasClass("fade")?n.$backdrop.one(s.support.transition.end,function(){n.destroy()}):n.destroy()):n.destroy():i.destroyModal(n)})),n.$element.on("destroyed.modalmanager",l(function(t){i.destroyModal(n)}))},getOpenModals:function(){for(var t=[],e=0;e<this.stack.length;e++)this.stack[e].isShown&&t.push(this.stack[e]);return t},hasOpenModal:function(){return 0<this.getOpenModals().length},setFocus:function(){for(var t,e=0;e<this.stack.length;e++)this.stack[e].isShown&&(t=this.stack[e]);t&&t.focus()},destroyModal:function(t){t.$element.off(".modalmanager"),t.$backdrop&&this.removeBackdrop(t),this.stack.splice(this.getIndexOfModal(t),1);var e=this.hasOpenModal();this.$element.toggleClass("modal-open",e),e||this.$element.removeClass("page-overflow"),this.removeContainer(t),this.setFocus()},getModalAt:function(t){return this.stack[t]},getIndexOfModal:function(t){for(var e=0;e<this.stack.length;e++)if(t===this.stack[e])return e},replace:function(t){for(var e,n=0;n<this.stack.length;n++)this.stack[n].isShown&&(e=this.stack[n]);e?(this.$backdropHandle=e.$backdrop,e.$backdrop=null,t&&e.$element.one("hidden",l(s.proxy(t,this))),e.hide()):t&&t()},removeBackdrop:function(t){t.$backdrop.remove(),t.$backdrop=null},createBackdrop:function(t,e){var n;return this.$backdropHandle?((n=this.$backdropHandle).off(".modalmanager"),this.$backdropHandle=null,this.isLoading&&this.removeSpinner()):n=s(e).addClass(t).appendTo(this.$element),n},removeContainer:function(t){t.$container.remove(),t.$container=null},createContainer:function(e){var t=s('<div class="modal-scrollable">').css("z-index",r("modal",this.getOpenModals().length)).appendTo(this.$element);return e&&"static"!=e.options.backdrop?t.on("click.modal",l(function(t){e.hide()})):e&&t.on("click.modal",l(function(t){e.attention()})),t},backdrop:function(t,e){var n,i=t.$element.hasClass("fade")?"fade":"",o=t.options.backdrop&&this.backdropCount<this.options.backdropLimit;t.isShown&&o?(o=s.support.transition&&i&&!this.$backdropHandle,t.$backdrop=this.createBackdrop(i,t.options.backdropTemplate),t.$backdrop.css("z-index",r("backdrop",this.getOpenModals().length)),o&&t.$backdrop[0].offsetWidth,t.$backdrop.addClass("in"),this.backdropCount+=1,o?t.$backdrop.one(s.support.transition.end,e):e()):!t.isShown&&t.$backdrop?(t.$backdrop.removeClass("in"),--this.backdropCount,n=this,s.support.transition&&t.$element.hasClass("fade")?t.$backdrop.one(s.support.transition.end,function(){n.removeBackdrop(t)}):n.removeBackdrop(t)):e&&e()},removeSpinner:function(){this.$spinner&&this.$spinner.remove(),this.$spinner=null,this.isLoading=!1},removeLoading:function(){this.$backdropHandle&&this.$backdropHandle.remove(),this.$backdropHandle=null,this.removeSpinner()},loading:function(t){var e,n;t=t||function(){},this.$element.toggleClass("modal-open",!this.isLoading||this.hasOpenModal()).toggleClass("page-overflow",s(window).height()<this.$element.height()),this.isLoading?this.isLoading&&this.$backdropHandle?(this.$backdropHandle.removeClass("in"),e=this,s.support.transition?this.$backdropHandle.one(s.support.transition.end,function(){e.removeLoading()}):e.removeLoading()):t&&t(this.isLoading):(this.$backdropHandle=this.createBackdrop("fade",this.options.backdropTemplate),this.$backdropHandle[0].offsetWidth,n=this.getOpenModals(),this.$backdropHandle.css("z-index",r("backdrop",n.length+1)).addClass("in"),n=s(this.options.spinner).css("z-index",r("modal",n.length+1)).appendTo(this.$element).addClass("in"),this.$spinner=s(this.createContainer()).append(n).on("click.modalmanager",s.proxy(this.loading,this)),this.isLoading=!0,s.support.transition?this.$backdropHandle.one(s.support.transition.end,t):t())}};var a,d,r=(d={},function(t,e){var n,i;return void 0===a&&(n=s('<div class="modal hide" />').appendTo(s.fn.modal.defaults.manager),i=s('<div class="modal-backdrop hide" />').appendTo(s.fn.modal.defaults.manager),d.modal=+n.css("z-index"),d.backdrop=+i.css("z-index"),a=d.modal-d.backdrop,n.remove(),i.remove(),i=n=null),d[t]+a*e});function l(e){return function(t){if(t&&this===t.target)return e.apply(this,arguments)}}s.fn.modalmanager=function(n,i){return this.each(function(){var t=s(this),e=t.data("modalmanager");e||t.data("modalmanager",e=new o(this,n)),"string"==typeof n&&e[n].apply(e,[].concat(i))})},s.fn.modalmanager.defaults={backdropLimit:999,resize:!0,spinner:'<div class="loading-spinner fade" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>',backdropTemplate:'<div class="modal-backdrop" />'},s.fn.modalmanager.Constructor=o,s(function(){s(document).off("show.bs.modal").off("hidden.bs.modal")})}(jQuery),function(s){"use strict";function a(t,e){this.init(t,e)}a.prototype={constructor:a,init:function(t,e){var n=this;this.options=e,this.$element=s(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",s.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote,function(){var t=s.Event("loaded");n.$element.trigger(t)});t="function"==typeof this.options.manager?this.options.manager.call(this):this.options.manager;(t=t.appendModal?t:s(t).modalmanager().data("modalmanager")).appendModal(this)},toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=s.Event("show");this.isShown||(this.$element.trigger(t),t.isDefaultPrevented()||(this.escape(),this.tab(),this.options.loading&&this.loading()))},hide:function(t){t&&t.preventDefault(),t=s.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.tab(),this.isLoading&&this.loading(),s(document).off("focusin.modal"),this.$element.removeClass("in").removeClass("animated").removeClass(this.options.attentionAnimation).removeClass("modal-overflow").attr("aria-hidden",!0),s.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},layout:function(){var t,e=this.options.height?"height":"max-height",n=this.options.height||this.options.maxHeight;this.options.width?(this.$element.css("width",this.options.width),(t=this).$element.css("margin-left",function(){return/%/gi.test(t.options.width)?-parseInt(t.options.width)/2+"%":-s(this).width()/2+"px"})):(this.$element.css("width",""),this.$element.css("margin-left","")),this.$element.find(".modal-body").css("overflow","").css(e,""),n&&this.$element.find(".modal-body").css("overflow","auto").css(e,n),s(window).height()-10<this.$element.height()||this.options.modalOverflow?this.$element.css("margin-top",0).addClass("modal-overflow"):this.$element.css("margin-top",0-this.$element.height()/2).removeClass("modal-overflow")},tab:function(){var i=this;this.isShown&&this.options.consumeTab?this.$element.on("keydown.tabindex.modal","[data-tabindex]",function(t){var e,n;t.keyCode&&9==t.keyCode&&(e=[],n=Number(s(this).data("tabindex")),i.$element.find("[data-tabindex]:enabled:visible:not([readonly])").each(function(t){e.push(Number(s(this).data("tabindex")))}),e.sort(function(t,e){return t-e}),n=s.inArray(n,e),(t.shiftKey?0==n?i.$element.find("[data-tabindex="+e[e.length-1]+"]"):i.$element.find("[data-tabindex="+e[n-1]+"]"):n<e.length-1?i.$element.find("[data-tabindex="+e[n+1]+"]"):i.$element.find("[data-tabindex="+e[0]+"]")).focus(),t.preventDefault())}):this.isShown||this.$element.off("keydown.tabindex.modal")},escape:function(){var e=this;this.isShown&&this.options.keyboard?(this.$element.attr("tabindex")||this.$element.attr("tabindex",-1),this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()})):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,e=setTimeout(function(){t.$element.off(s.support.transition.end),t.hideModal()},500);this.$element.one(s.support.transition.end,function(){clearTimeout(e),t.hideModal()})},hideModal:function(){var t=this.options.height?"height":"max-height";(this.options.height||this.options.maxHeight)&&this.$element.find(".modal-body").css("overflow","").css(t,""),this.$element.hide().trigger("hidden")},removeLoading:function(){this.$loading.remove(),this.$loading=null,this.isLoading=!1},loading:function(t){t=t||function(){};var e,n,i=this.$element.hasClass("fade")?"fade":"";this.isLoading?this.isLoading&&this.$loading?(this.$loading.removeClass("in"),e=this,s.support.transition&&this.$element.hasClass("fade")?this.$loading.one(s.support.transition.end,function(){e.removeLoading()}):e.removeLoading()):t&&t(this.isLoading):(n=s.support.transition&&i,this.$loading=s('<div class="loading-mask '+i+'">').append(this.options.spinner).appendTo(this.$element),n&&this.$loading[0].offsetWidth,this.$loading.addClass("in"),this.isLoading=!0,n?this.$loading.one(s.support.transition.end,t):t())},focus:function(){var t=this.$element.find(this.options.focusOn);(t=t.length?t:this.$element).focus()},attention:function(){var t;this.options.attentionAnimation&&(this.$element.removeClass("animated").removeClass(this.options.attentionAnimation),t=this,setTimeout(function(){t.$element.addClass("animated").addClass(t.options.attentionAnimation)},0)),this.focus()},destroy:function(){var t=s.Event("destroy");this.$element.trigger(t),t.isDefaultPrevented()||(this.$element.off(".modal").removeData("modal").removeClass("in").attr("aria-hidden",!0),this.$parent!==this.$element.parent()?this.$element.appendTo(this.$parent):this.$parent.length||(this.$element.remove(),this.$element=null),this.$element.trigger("destroyed"))}},s.fn.modal=function(i,o){return this.each(function(){var t=s(this),e=t.data("modal"),n=s.extend({},s.fn.modal.defaults,t.data(),"object"==typeof i&&i);e||t.data("modal",e=new a(this,n)),"string"==typeof i?e[i].apply(e,[].concat(o)):n.show&&e.show()})},s.fn.modal.defaults={keyboard:!0,backdrop:!0,loading:!1,show:!0,width:null,height:null,maxHeight:null,modalOverflow:!1,consumeTab:!0,focusOn:null,replace:!1,resize:!1,attentionAnimation:"shake",manager:"body",spinner:'<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>',backdropTemplate:'<div class="modal-backdrop" />'},s.fn.modal.Constructor=a,s(function(){s(document).off("click.modal").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var e=s(this),n=e.attr("href"),i=s(e.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),n=i.data("modal")?"toggle":s.extend({remote:!/#/.test(n)&&n},i.data(),e.data());t.preventDefault(),i.modal(n).one("hide",function(){e.focus()})})})}(window.jQuery);